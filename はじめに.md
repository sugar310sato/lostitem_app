# 拾得物管理システム - インストーラー作成

## ✅ 準備完了

インストーラー作成に必要なファイルがすべて準備されました。

## 📝 まず確認すること

### 現在のアプリ構成

1. **メインアプリ**: `flet_app.py`
2. **ページモジュール**: `flet_pages/` ディレクトリ（14ファイル）
3. **データベース**: `lostitem.db`
4. **YOLOモデル**: 3つの.ptファイル
5. **設定ファイル**: `item_classification.json`
6. **データディレクトリ**: `data/` ディレクトリ構造

### PyInstallerビルド成果物

- **dist/flet_app.exe** (137MB) - 既にビルド済み

## 🚀 インストーラー作成手順

### ステップ1: Inno Setupをインストール

まだインストールしていない場合：
1. https://jrsoftware.org/isdl.php にアクセス
2. 最新版（6.x）をダウンロード
3. インストール（デフォルト設定でOK）

### ステップ2: ビルド実行

プロジェクトルートで以下を実行：

```batch
build_installer.bat
```

### ステップ3: 完成

以下の場所にインストーラーが作成されます：
```
installer/拾得物管理システム_Setup_1.0.0.exe
```

## 📖 詳細情報

- **クイックスタート**: `README_インストーラー.md`
- **完全ガイド**: `インストーラー作成ガイド.md`
- **手順の詳細**: `インストーラー作成手順.md`
- **ファイル構成**: `アプリケーション構成.md`
- **ファイル一覧**: `インストーラー関連ファイル一覧.md`

## ⚙️ カスタマイズ

### バージョン番号を変更する

`installer.iss` を開いて1行目を編集：

```iss
#define MyAppVersion "1.0.0"  ← 変更
```

### アプリ名を変更する

`installer.iss` を開いて4行目を編集：

```iss
#define MyAppName "拾得物管理システム"  ← 変更
```

### インストール先を変更する

デフォルト: `C:\Program Files\拾得物管理システム\`

ユーザーAppDataに変更する場合、`installer.iss` を編集：

```iss
DefaultDirName={localappdata}\{#MyAppName}  ← 21行目
```

## 🔧 トラブルシューティング

### エラー: Inno Setupが見つかりません

→ Inno Setupをインストールしてください

### エラー: ビルドに失敗しました

→ `dist/flet_app.exe` が存在するか確認

### エラー: アプリが起動しません

→ PyInstallerの設定を確認（`flet_app.spec`）

## 📊 作成されるインストーラー

### インストール先
- **アプリファイル**: `C:\Program Files\拾得物管理システム\`
- **データファイル**: `C:\ProgramData\拾得物管理システム\data\`

### 含まれるもの
- ✅ 実行ファイル（flet_app.exe）
- ✅ データディレクトリ構造
- ✅ 初期データベース（lostitem.db）

### ユーザー機能
- ✅ インストール先の指定
- ✅ スタートメニューフォルダーの指定
- ✅ デスクトップショートカット（オプション）
- ✅ アンインストール機能

## 🎯 次のステップ

1. **ビルドテスト**: 仮想マシンで動作確認
2. **カスタマイズ**: バージョン番号、アイコンなどを変更
3. **デジタル署名**: 本番環境で使用する場合（オプション）
4. **配布**: インストーラーを配布

## 📞 サポート

問題が発生した場合：
1. エラーメッセージを確認
2. ドキュメントを参照
3. GitHubイシューを作成（該当する場合）

---

**準備ができたら、`build_installer.bat` を実行してください！**

