# 遺失物管理システム - exeファイル作成ガイド

## 概要
このガイドでは、遺失物管理システムをexeファイルに変換する方法を説明します。

## 前提条件
- Python 3.8以上がインストールされている
- 必要な依存関係がインストールされている（requirements.txt）
- 十分なディスク容量（最低5GB以上推奨）

## 手順

### 1. 環境の準備
```bash
# 仮想環境のアクティベート（推奨）
venv\Scripts\activate

# 依存関係のインストール
pip install -r requirements.txt
```

### 2. exeファイルのビルド
```bash
# ビルドスクリプトの実行
python build_exe.py
```

### 3. ビルドの確認
ビルドが成功すると、以下のファイルが作成されます：
- `dist/遺失物管理システム.exe` - メインの実行ファイル

## 使用方法

### exeファイルの実行
1. `dist/遺失物管理システム.exe` をダブルクリック
2. コマンドプロンプトが開き、アプリケーションが起動します
3. ブラウザで `http://localhost:5000` にアクセス

### 初回起動時の注意
- 初回起動時は、必要なライブラリの読み込みに時間がかかる場合があります
- 起動完了まで数分待つ必要がある場合があります

## トラブルシューティング

### よくある問題

#### 1. ビルドエラー
- **エラー**: `ModuleNotFoundError`
- **解決策**: 必要な依存関係が不足している可能性があります。`pip install -r requirements.txt` を再実行してください。

#### 2. 実行時エラー
- **エラー**: `FileNotFoundError`
- **解決策**: 設定ファイルやデータベースファイルが見つからない場合があります。`apps/config.py` が存在することを確認してください。

#### 3. メモリ不足
- **エラー**: `MemoryError`
- **解決策**: システムのメモリが不足している可能性があります。他のアプリケーションを終了してから再試行してください。

#### 4. アンチウイルスソフトの警告
- **現象**: アンチウイルスソフトがexeファイルを検出
- **解決策**: これは誤検知です。必要に応じて除外設定を追加してください。

### 手動でのビルド
自動ビルドが失敗した場合、手動でビルドすることも可能です：

```bash
# PyInstallerのインストール
pip install pyinstaller

# 設定ファイルの作成
copy apps\config.sample apps\config.py

# 直接ビルド
pyinstaller --onefile --add-data "apps/static;apps/static" --add-data "apps/*/templates;apps/*/templates" --hidden-import flask --hidden-import flask_login main.py
```

## 配布方法

### 単一ファイル配布
- `dist/遺失物管理システム.exe` のみを配布
- 初回起動時に必要なファイルが自動的に展開されます

### フォルダ配布
- `dist/` フォルダ全体を配布
- より安定した動作が期待できます

## 注意事項

1. **ファイルサイズ**: exeファイルは数百MBになる場合があります
2. **起動時間**: 初回起動時は時間がかかります
3. **データベース**: SQLiteデータベースはexeファイルと同じディレクトリに作成されます
4. **画像ファイル**: アップロードされた画像はexeファイルと同じディレクトリに保存されます

## サポート

問題が発生した場合は、以下を確認してください：
1. エラーメッセージの詳細
2. システムのメモリ使用量
3. アンチウイルスソフトの設定
4. Python環境のバージョン

## 更新方法

アプリケーションを更新する場合は、以下の手順で行います：

1. ソースコードを更新
2. `build_exe.py` を再実行
3. 新しいexeファイルを配布

既存のデータベースファイル（local.sqlite）は保持されます。 