# 拾得物管理アプリケーション - ファイル構成

## 現在のアプリケーション構成

### メインアプリケーションファイル
- **flet_app.py** - メインエントリーポイント（965行）
- **requirements.txt** - Python依存パッケージ

### ページモジュール（flet_pages/）
- **home.py** - ホーム画面
- **camera_form.py** - カメラ撮影画面
- **register_form.py** - 拾得物登録フォーム（2,620行）
- **items_list.py** - 拾得物一覧
- **notfound_list.py** - 遺失物一覧
- **notfound_management.py** - 遺失物管理
- **notfound_registration.py** - 遺失物登録
- **refund_management.py** - 還付管理
- **police_management.py** - 警察届け出処理
- **search_management.py** - 検索管理
- **settings.py** - 設定画面
- **statistics.py** - 統計画面
- **login_page.py** - ログイン画面
- **initial_setup.py** - 初回セットアップ

### AIモデルファイル
- **yolov8x_seg_custom.pt** - カスタムYOLOモデル（セグメンテーション）
- **yolo11x_seg_custom.pt** - カスタムYOLOモデル（セグメンテーション、v11）
- **yolov8n.pt** - 標準YOLOモデル

### 設定ファイル
- **item_classification.json** - 物品分類定義
- **flet_app.spec** - PyInstaller設定ファイル

### データディレクトリ（data/）
```
data/
├── backups/
│   ├── database/
│   └── images/
├── config/
│   ├── __init__.py
│   └── paths.py
├── database/
│   └── lostitem.db（実際のデータベースファイル）
├── images/
│   ├── bundle/
│   ├── main/
│   └── sub/
└── logs/
```

### ビルド成果物
- **dist/flet_app.exe** - ビルド済み実行ファイル（現在存在）
- **build/** - ビルド中間ファイル

## インストーラーに含める必要があるもの

### 必須ファイル
1. **flet_app.exe** - メイン実行ファイル
2. **data/ディレクトリ全体** - データベース、画像、ログの保存先
3. **YOLOモデルファイル**（*.pt）
4. **item_classification.json**
5. **flet_pages/全モジュール**（ソースファイルとして含めるか、pyzに含める）

### インストール先の構成案
```
C:\Program Files\拾得物管理システム\
├── flet_app.exe
├── flet_pages\（すべてのPythonモジュール）
├── item_classification.json
├── yolov8x_seg_custom.pt
├── yolo11x_seg_custom.pt
├── yolov8n.pt
└── data\（空のディレクトリ構造）
    ├── backups\
    ├── config\
    ├── database\
    ├── images\
    │   ├── bundle\
    │   ├── main\
    │   └── sub\
    └── logs\

C:\Users\{ユーザー名}\AppData\Local\拾得物管理システム\
├── data\（実際のデータ保存場所）
│   ├── database\
│   │   └── lostitem.db
│   ├── images\
│   ├── logs\
│   └── config\
```

### インストーラー作成の推奨方法

#### オプション1: Inno Setup（推奨）
- 無料で高機能
- 日本語UI対応
- ウィザード形式で簡単
- バージョン情報、アンインストール機能付き

#### オプション2: NSIS
- オープンソース
- スクリプトベースで高度なカスタマイズ可能

#### オプション3: cx_Freeze
- Pythonネイティブ
- シンプルだが機能が限定的

## 次のステップ

1. **PyInstallerのspecファイルを更新** - すべてのリソースを含める
2. **Inno Setupスクリプトの作成** - インストール・アンインストール処理を定義
3. **ショートカット作成** - デスクトップ・スタートメニュー
4. **実行テスト** - 仮想マシンでテスト

